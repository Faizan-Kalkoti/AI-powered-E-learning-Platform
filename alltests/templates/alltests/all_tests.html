{% extends "base.html" %}
{% block content %}

{% if user.student and user.is_authenticated %}
   {% if user.student in course.student.all  %}




<!-- Top heading -->
<div class="row" style="padding: 2em; margin: 0px; background-color: whitesmoke; box-shadow: 0em 1em 1em #b9b9b9;">
  <div class="col-lg-6">
     <h2>Test for {{course}}</h2> 
  </div>
  <div class="col-lg-6" >
      <div style="text-align: right;"> 
          Time remaining - <span id="time_remaining">19 : 60</span>  &nbsp; &nbsp;
          <button id="endtest" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#pretest-submit">End test</button>
      </div>
  </div>
</div>
<!-- end of the top part -->


<!-- (1) - To start the main contents of the page  -->

<!--row started here-->
<div class="row" style="margin: 0px; padding: 1em;">
  <div class="col-lg-7">
      <div><h3>Current Question</h3></div>
        <hr>
        <div>
          <div class="current-question" id="curr-question">
              <h5> <div style="padding-bottom:0.4em;">Question <span id="qno">0</span> </div>
              <span id="quest-text">Here will be your question. choose the appropriate answer 
                from the options given below: </span> </h5>
          </div><br>
          <div class="current-options" id="curr-options">
           <!-- <form id="radio-form"> -->
              <div class="form-check" id="div_a">
                <input value="A" class="form-check-input" type="radio" name="radio-option" id="rad_a">
                <label class="form-check-label" id="op_a" for="rad_a">
                  Option A</label>
              </div>
              <div class="form-check" id="div_b">
                <input value="B" class="form-check-input" type="radio" name="radio-option" id="rad_b" >
                <label class="form-check-label" id="op_b" for="rad_b">
                  Option B
                </label>
              </div>
              <div class="form-check" id="div_c">
                <input value="C" class="form-check-input" type="radio" name="radio-option" id="rad_c" >
                <label class="form-check-label" id="op_c" for="rad_c">
                  Option C
                </label>
              </div>
              <div class="form-check" id="div_d">
                <input value="D" class="form-check-input" type="radio" name="radio-option" id="rad_d" >
                <label class="form-check-label" id="op_d" for="rad_d">
                  Option D
                </label>
              </div>
              <div id="questionid" style="display: none;">
              </div>
           <!-- </form> -->
          </div>

        </div><br>
        <div style="padding: 1em; text-align: center;">
          <button class="btn btn-dark" onclick="clearoptions()" style="width: 6em; font-size: 1.2em;"> Clear</button> &nbsp; &nbsp;
          <button class="btn btn-success" style="width: 6em; font-size: 1.2em;" id="savebtn"> Save</button>
        </div>
  </div>
  <!--End of the column with single question -->

  
  
  <!-- Column to show question to switch between the questions -->
  <div class="col-lg-5" style="background-color: rgb(209, 222, 222); border-radius: 1em;">
          <div style="padding-top: 0.5em;">
             <h4 style="text-align: center;"> All Questions </h4>
             <hr>
          </div>
          <div class="row" style="margin: 0px; padding: 0.4em;">
              <div class="col-lg-3" style="padding: 1em;">
                  <div id="q1" class="test-questions" onclick="showquestion(1)">Q1</div><br>
                  <div id="q2" class="test-questions" onclick="showquestion(2)">Q2</div><br>
                  <div id="q3" class="test-questions" onclick="showquestion(3)">Q3</div><br>
                  <div id="q4" class="test-questions" onclick="showquestion(4)">Q4</div><br>
                  <div id="q5" class="test-questions" onclick="showquestion(5)">Q5</div><br>
              </div>
              <div class="col-lg-3" style="padding: 1em;">
                  <div id="q6" class="test-questions" onclick="showquestion(6)">Q6</div><br>
                  <div id="q7" class="test-questions" onclick="showquestion(7)">Q7</div><br>
                  <div id="q8" class="test-questions" onclick="showquestion(8)">Q8</div><br>
                  <div id="q9" class="test-questions" onclick="showquestion(9)">Q9</div><br>
                  <div id="q10" class="test-questions" onclick="showquestion(10)">Q10</div><br>
              </div>
              <div class="col-lg-3" style="padding: 1em;">
                  <div id="q11" class="test-questions" onclick="showquestion(11)">Q11</div><br>
                  <div id="q12" class="test-questions" onclick="showquestion(12)">Q12</div><br>
                  <div id="q13" class="test-questions" onclick="showquestion(13)">Q13</div><br>
                  <div id="q14" class="test-questions" onclick="showquestion(14)">Q14</div><br>
                  <div id="q15" class="test-questions" onclick="showquestion(15)">Q15</div><br>
              </div>
              <div class="col-lg-3" style="padding: 1em;">
                <div id="q16" class="test-questions" onclick="showquestion(16)">Q16</div><br>
                <div id="q17" class="test-questions" onclick="showquestion(17)">Q17</div><br>
                <div id="q18" class="test-questions" onclick="showquestion(18)">Q18</div><br>
                <div id="q19" class="test-questions" onclick="showquestion(19)">Q19</div><br>
                <div id="q20" class="test-questions" onclick="showquestion(20)">Q20</div><br>
            </div>
          </div>
      </div>
  </div> <!--row ended here -->
</div>
<!--outermain div end -->
<br><br>




<!-- Modal start (To End Test) -->
<div class="modal fade" id="pretest-submit" data-bs-backdrop="static" style="padding: 1em;"
data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content">
    <h1 class="fs-3" id="Modal_level_title" style="text-align: center; padding-top: 1em;">
      End test now?</h1>
    <hr>
    <div class="modal-body" id="Modal_level_body" style="text-align: center;">
      <!--modal body -->
       <div style="font-size: 1.2em;">
          Do you wish to end the test? 
          All questions attempted will be evaluated.
          <br><br>
          <span id="questionattempted1">
              [Questions attempted: 10/20]
          </span>
       </div><br>

       <div style="padding-top: 0.4em;">
          <button class="btn btn-danger" id="seeResult1" onclick="sendData()"
           style="margin: 0.2em;">Submit Test</button>
       </div>
    </div>
    <div style="text-align: center; padding-bottom: 1em;" >
      <hr>
      <button type="button" class="btn btn-dark" data-bs-dismiss="modal">Close</button>
    </div>
  </div>
</div>
</div>
<!-- Modal end -->



<!-- Modal 2 start -->
<div class="modal-backdrop fade" style="display: none;" id="yo-modal"></div>
<div class="modal fade" id="submit-modal" data-bs-backdrop="static" style="padding: 3em;"
data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="false">
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content" style="background-color: white;">
    <div class="modal-body" id="Modal_level_body" style="text-align: center;">
      <!--modal body -->
       <div style="font-size: 1.1em;">
          <h3>TIME OVER</h3>
          <h4>The test has ended!</h4>
          <br>
          <div id="questionattempted2">
              [Questions attempted: 10/20]
          </div>
       </div><br>

       <div style="padding-top: 0.4em;">
          <button class="btn btn-danger" id="seeResult2" onclick="sendData()" 
          style="margin: 0.2em;">See results</button>
          <!-- href="{% url 'coursetests:pretestresult' course_slug=course.slug %}" -->
       </div>
    </div>
  </div>
</div>
</div>
<!-- Modal 2 end -->

<!-- End of the main contents of the page -->




<!-- javascript for this page -->
{% include "alltests/js_for_test.html" %} 
<!-- End of the javascript template-->

  {% else %}
    <h2 style="text-align: center;">You Are Not Authorized!</h2>
    <div style="padding: 13em 0em;"></div>
  {% endif %} <!-- First if ended -->
  {% else %}
    <h2 style="text-align: center;">You Are Not Authorized!</h2>
    <div style="padding: 13em 0em;"></div>
{% endif %} <!-- Second if ended -->






{%  endblock %}