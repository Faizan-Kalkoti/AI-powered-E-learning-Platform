{% load static %}
<script nonce="undefined" src="{% static 'courses/js/zingchart.min.js' %}"></script>

<!-- 
<a class="zc-ref" href="https://www.zingchart.com/">Click here to go to the source</a>
-->

<div id='myChart'></div>
<script>
  ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9", "b55b025e438fa8a98e32482b5f768ff5"];
  /* window.feed = function(callback) {
    var tick = {};
    tick.plot0 = Math.ceil(350 + (Math.random() * 500));
    callback(JSON.stringify(tick));
  }; 
  This was for random generation of data to the chart*/

  
  {% if student_speed %}
         var user_speed = {{student_speed.average_modules_pd}};
  {% else %} 
         var user_speed = 0;
  {% endif %}

  var myConfig = {
    type: "gauge",
    globals: {
      fontSize: 16
    },
    plotarea: {
      marginTop: 60,
      marginBottom: 10
    },
    plot: {
      size: '100%',
      valueBox: {
        placement: 'center',
        text: '%v', //default
        fontSize: 20,
        rules: [{
            rule: '%v > 40',
            text: '%v<br>EXCELLENT'
          },
          {
            rule: '%v <= 40 && %v > 20',
            text: '%v<br>Good'
          },
          {
            rule: '%v <= 20 && %v > 5',
            text: '%v<br>Fair'
          },
          {
            rule: '%v <= 5',
            text: '%v<br>Bad'
          }
        ]
      }
    },
    tooltip: {
      borderRadius: 5
    },
    scaleR: {
      aperture: 200,
      minValue: 0,
      maxValue: 50,
      step: 10,
      center: {
        visible: false
      },
      tick: {
        visible: false
      },
      item: {
        offsetR: 0,
        rules: [{
          rule: '%i == 9',
          offsetX: 15
        }]
      },
      labels: ['0'],
      ring: {
        size: 30,
        rules: [{
            rule: '%v >= 0 && %v < 10',
            backgroundColor: '#E53935'  
          },
          {
            rule: '%v >= 10 && %v < 20',
            backgroundColor: '#EF5570' 
          },
          {
            rule: '%v >= 20 && %v < 40',
            backgroundColor: '#FFA726'
          },
          {
            rule: '%v >= 40',
            backgroundColor: 'green'
          }
        ]
      }
    },
    refresh: {
      type: "feed",
      transport: "js",
      url: "feed()"
     // interval: 1500,
      //resetTimeout: 1000
    },
    scale: {
        "size-factor": "100%" //Modify your gauge chart size.
      },
    series: [{
      values: [user_speed],      
      backgroundColor: 'black',
      indicator: [10, 10, 10, 10, 0.75],
      animation: {
        effect: 2,
        method: 4,
        sequence: 3,
        speed: 1500
      },
    }]
  };

  zingchart.render({
    id: 'myChart',
    data: myConfig,
    height: 300,
    width: '100%'
  });
</script>